{% extends "base.html" %}

{% block title %}Home - Office Rental Platform{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-6 text-itpark-dark">Available Buildings</h1>

<!-- Filters -->
<form method="get" action="/" class="bg-white rounded-lg shadow p-4 mb-6 flex flex-wrap gap-4">
  <label class="flex flex-col text-sm">
    Region:
    <select name="region" class="border rounded px-2 py-2 focus:outline-none focus:ring-2 focus:ring-itpark-green">
      <option value="">All</option>
      {% for r in regions %}
        <option value="{{ r.id }}" {% if selected_region == r.id %}selected{% endif %}>{{ r.name }}</option>
      {% endfor %}
    </select>
  </label>

  <!-- <label class="flex flex-col text-sm">
    City:
    <input type="text" name="city" value="{{ selected_city or '' }}"
           class="border rounded px-2 py-2 focus:outline-none focus:ring-2 focus:ring-itpark-green">
  </label> -->

  <label class="flex flex-col text-sm">
    Max Price (per m²):
    <input type="number" name="max_price" value="{{ selected_price or '' }}" step="0.01"
           class="border rounded px-2 py-2 focus:outline-none focus:ring-2 focus:ring-itpark-green">
  </label>

  <button type="submit"
          class="bg-itpark-green hover:bg-itpark-green-dark text-white px-4 py-2 rounded transition">
    Filter
  </button>
</form>

<!-- Buildings List -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
  {% if buildings %}
    {% for b in buildings %}
    <div class="bg-white rounded-lg shadow hover:shadow-lg transition overflow-hidden">
      <img src="{{ b.image if b.image else url_for('static', path='/images/default.jpg') }}"
           alt="{{ b.name }}" class="w-full h-48 object-cover">
      <div class="p-4">
        <h2 class="text-lg font-semibold text-itpark-dark">{{ b.name }}</h2>
        <p class="text-sm text-gray-700"><strong>Address:</strong> {{ b.address }}</p>
        <p class="text-sm text-gray-700"><strong>Floors:</strong> {{ b.floors }}</p>
        <p class="text-sm text-gray-700"><strong>Price per m²:</strong> ${{ b.price_per_m2 }}</p>
        <a href="/building/{{ b.id }}"
           class="mt-3 inline-block bg-itpark-green hover:bg-itpark-green-dark text-white px-3 py-2 rounded transition">
          View Details
        </a>
      </div>
    </div>
    {% endfor %}
  {% else %}
    <p class="col-span-full text-center text-gray-500">No buildings found.</p>
  {% endif %}
</div>
{% endblock %}
